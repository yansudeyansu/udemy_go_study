
# RESTful APIの4つの重要な原則

## 1. 統一インターフェース（Uniform Interface）
- APIの操作方法が統一されていること
- 主な要素：
  - リソースの識別（URIによる一意な識別）
  - 表現を通じたリソース操作
  - 自己記述的なメッセージ
  - HATEOASによるハイパーメディア
- メリット：
  - シンプルで理解しやすい
  - 実装の独立性が高い

## 2. アドレス可能性（Addressability）
- すべてのリソースが一意のURIを持つ
- リソースへのアクセスがURI経由で可能
- 例：
  - `/users/123` （特定のユーザー）
  - `/posts/456/comments` （特定の投稿のコメント）
- メリット：
  - リソースの明確な識別が可能
  - ブックマーク可能
  - キャッシュ可能

## 3. 接続性（Connectedness）
- リソース間のリンクによる関連付け
- HATEOASの原則に基づく
- レスポンスに関連リソースへのリンクを含める
- 例：
  ```json
  {
    "id": 123,
    "name": "John",
    "links": {
      "orders": "/users/123/orders",
      "profile": "/users/123/profile"
    }
  }
  ```
- メリット：
  - APIの探索が容易
  - クライアントの柔軟な実装が可能

## 4. ステートレス性（Statelessness）
- サーバーがクライアントの状態を保持しない
- 各リクエストは独立して完結
- 必要な情報は全てリクエストに含める
- セッション管理はクライアント側で実施
- メリット：
  - スケーラビリティの向上
  - 信頼性の向上
  - 実装の簡素化
  - キャッシュの容易さ

## シーケンス設計のめも

### 1. シーケンスの粒度
- 機能単位でシーケンスを作成する
- ユーザーアクションや画面単位ではなく、業務機能として意味のある単位で区切る
- 余分な要素は含めない

### 2. 重複機能の統合
- 同じ処理フローは1つにまとめる
- 例：応募処理の場合
  - シリアル応募とレシート応募は応募手段が異なるだけ
  - 基本的な応募処理フローは共通
  - 統合することでDB設計やロジックがシンプルになる
- メリット
  - DBカラムの重複を防ぐ
  - ロジックの複雑化を避ける
  - 保守性の向上

### 3. シーケンス設計の基本アプローチ
- メインフローを最初に設計
  - 正常系の処理フローに集中する
  - 例外処理は後回しにする
  - 条件分岐(if文)は一時的に無視

### 4. APIゲートウェイの設計指針
#### 4.1 ロジック実装の制約
- APIゲートウェイではビジネスロジックを実装しない
  - ルーティングのみを担当
  - 認証・認可の制御
  - リクエスト/レスポンスの変換
  - レートリミット
  - キャッシュ制御
- 理由
  - マイクロサービスアーキテクチャの原則に従う
  - 各サービスの独立性を保つ
  - メンテナンス性の向上
  - スケーラビリティの確保


#### 4.2 APIエンドポイントは一個あたりに処理は必ず1つ
- 1つのAPIエンドポイントには1つの処理を担当させる
- 1つのAPIエンドポイントに複数の処理が混在すると、そのAPIエンドポイントが担当する業務の意味が曖昧になる
